(window.wpJsonpTemplateSections=window.wpJsonpTemplateSections||[]).push([[4],{127:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"e",(function(){return u})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return c})),r.d(e,"b",(function(){return f}));r(0),r(3);var n=r(1);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var a=function(t){if(!t)return 1;if(!t.dataset.imageDimensions)return 1;var e=t.dataset.imageDimensions.split("x");return e[0]&&e[1]?+e[0]/+e[1]:void 0},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(t<=e)return t;var r=window.innerWidth;return r<=n.g.sm?Math.max(e,Math.round(.25*t)):r<=n.g.md?Math.max(e,Math.round(.5*t)):r<=n.g.lg?Math.max(e,Math.round(.75*t)):t},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=window.innerWidth,r=Math.max(1,t);return e<=n.g.sm?t>1?2:1:e<=n.g.md?Math.ceil(.5*r):e<=n.g.lg?Math.ceil(.75*r):r},c=function(t){var e={width:0,height:0};if(!t)return e;if(!t.dataset.imageDimensions)return e;var r=i(t.dataset.imageDimensions.split("x"),2),n=r[0],o=r[1];return n&&o?{width:+n,height:+o}:e},f=function(t){var e={x:.5,y:.5};if(!t)return e;if(!t.dataset.imageFocalPoint)return e;var r=i(t.dataset.imageFocalPoint.split(","),2),n=r[0],o=r[1];return n&&o?{x:+n,y:+o}:e}},129:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return o}));var n="aPosition",i="aNormal",o="aUv"},155:function(t,e,r){"use strict";var n=r(123),i="activeTexture";e.a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.get(i)!==e&&(t.gl.activeTexture(n.z+e),t.set(i,e))}},156:function(t,e,r){"use strict";var n=r(123);e.a=function(t,e,r){var i="texture-".concat(r);t.get(i)!==e&&(t.gl.bindTexture(n.A,e),t.set(i,e))}},157:function(t,e,r){"use strict";e.a=function(t,e){var r=e.wrapS,n=e.wrapT,i=e.minFilter,o=e.magFilter,a=e.flipY,u=e.premultiplyAlpha;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,a),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u)}},161:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return i}));var n=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};var i=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],p=r[0],h=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=p*n+h*a+c,t[7]=p*i+h*u+f,t[8]=p*o+h*s+l,t};var o=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}},172:function(t,e,r){"use strict";var n=r(123);e.a=function(t,e){var r=t.gl;e.image&&r.texImage2D(n.A,0,e.format,e.format,e.type,e.image),e.generateMipmap&&r.generateMipmap(n.A)}},201:function(t,e,r){"use strict";r.d(e,"a",(function(){return A}));r(0);var n=r(18),i=r(228),o=r(158),a=r(33),u=r(34),s=r(127),c=r(35),f=r(203),l=r(602),p=r(287),h=r(205),d=r(285),m=r(229),v=r(161);var g=function(t){var e,r,n=t.matrix,i=void 0===n?[]:n,o=t.containerWidth,a=t.containerHeight,u=t.contentWidth,s=t.contentHeight,c=t.centerX,f=void 0===c?.5:c,l=t.centerY;u/s>o/a?(e=o*s/(a*u),r=1):(e=1,r=a*u/(o*s));var p=(e-1)/2*-1,h=(r-1)/2*-1,d=p+(f-.5)*p*2,m=h+(.5-(void 0===l?.5:l))*h*2;return Object(v.a)(i),Object(v.c)(i,i,[d,m]),Object(v.b)(i,i,[e,r]),i},y=r(374),b=r.n(y),x=r(149),w=r(202);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){_(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function T(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=U(t);if(e){var i=U(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?I(t):e}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(v,t);var e,r,o,u=E(v);function v(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,v),_(I(r=u.call(this,t,j({pixelRatio:i.a?Math.min(self.devicePixelRatio,1.5):1},e))),"onIntersection",(function(t){t?r.start():r.stop(),r.props.onIntersection(t)})),_(I(r),"_executeOnNextFrame",(function(t){requestAnimationFrame((function(){requestAnimationFrame((function(){return t()}))}))}));var n=r.props.image;return r.focalPoint=Object(s.b)(n)||{x:.5,y:.5},r.isImageLoaded=!1,r.isEnabled=r.isSupported&&!c.b,n?(r.isEnabled&&r.createResources(),r.loadImage(n),r):R(r)}return e=v,(r=[{key:"loadImage",value:function(t){var e=this;t.onload=function(){e.isEnabled&&e.onImageLoaded(t)},!window.Static.SQUARESPACE_CONTEXT.authenticatedAccount&&this.isEnabled&&t.complete&&""!==t.currentSrc&&this._executeOnNextFrame((function(){return e.onImageLoaded(t)})),a.a.loadLazy(t,{load:!0,mode:"cover",useAdvancedPositioning:!0})}},{key:"onImageLoaded",value:function(t){this.refresh(),this.isImageLoaded?this.texture.needsUpdate=!0:(this.isImageLoaded=!0,this.bindListeners(),t.style.visibility="hidden")}},{key:"createResources",value:function(){var t,e,r=this.props,n=r.image,i=r.uniforms,o=r.pixelRatio;this.texture=new f.a({image:n}),this.drawInfo=Object(l.a)({program:this.createProgram(),uniforms:j(j({},i),{},{uvMatrix:b()(),uImage:Object(p.a)(this.renderer,this.texture),uResolution:[this.canvas.width,this.canvas.height],uReversePixelRatio:1/o}),geometry:this.getGeometry({key:"big-triangle",factory:h.a})}),t=this.renderer,e=this.drawInfo.program,Object(w.a)(t,e),this.uniforms=this.drawInfo.uniforms,this.updateUvMatrix()}},{key:"createProgram",value:function(){var t=this.props,e=t.programKey,r=t.vert,n=t.frag;return this.getProgram({key:e,factory:function(){return new d.a({vert:r,frag:n})}})}},{key:"bindListeners",value:function(){this.intersectionScroll=new x.a(this.node,{onIntersection:this.onIntersection,onProgress:this.props.onScrollProgress,normalize:!1}),n.a.on(this.refresh)}},{key:"unbindListeners",value:function(){n.a.off(this.refresh),this.intersectionScroll&&this.intersectionScroll.destroy()}},{key:"onUpdateProps",value:function(t){this.props.programKey!==t.programKey&&(this.releaseResource(t.programKey),this.drawInfo.program=this.createProgram()),(this.props.imageNeedsUpdate||this.props.image!==t.image)&&(this.texture.image=this.props.image,this.texture.needsUpdate=!0,this.props.imageNeedsUpdate=!1),Object.assign(this.uniforms,this.props.uniforms),this.refresh()}},{key:"update",value:function(){this.props.onUpdate()}},{key:"render",value:function(){Object(m.a)(this.renderer,this.drawInfo)}},{key:"onRefresh",value:function(){this.uniforms.uResolution[0]=this.canvas.width,this.uniforms.uResolution[1]=this.canvas.height,this.updateUvMatrix(),this.props.onResize()}},{key:"updateUvMatrix",value:function(){g({matrix:this.drawInfo.material.uniforms.uvMatrix,containerWidth:this.canvas.width,containerHeight:this.canvas.height,contentWidth:this.props.image.naturalWidth,contentHeight:this.props.image.naturalHeight,centerX:this.focalPoint.x,centerY:this.focalPoint.y})}},{key:"onDestroy",value:function(){this.isEnabled&&this.unbindListeners()}}])&&T(e.prototype,r),o&&T(e,o),v}(o.a);_(A,"defaultProps",{programKey:null,vert:"#define GLSLIFY 1\nattribute vec3 aPosition;\nuniform mat3 uvMatrix;\nvarying vec2 vUv;\n\nvoid main(){\n  gl_Position=vec4(aPosition,1.);\n  vec2 uv=gl_Position.xy*.5+.5;\n\n  vUv=(uvMatrix*vec3(uv,1.)).xy;\n}",frag:"#define GLSLIFY 1\nuniform sampler2D uImage;\nvarying vec2 vUv;\n\nvoid main(){\n  vec4 tx = texture2D(uImage, vUv);\n  tx.xyz *= tx.a;\n\n  gl_FragColor = tx;\n}",image:null,uniforms:{},imageNeedsUpdate:!1,onUpdate:u.a,onResize:u.a,onIntersection:u.a,onScrollProgress:null})},203:function(t,e,r){"use strict";var n=r(120),i=r(123);e.a=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.image,o=void 0===r?null:r,a=e.minFilter,u=void 0===a?i.t:a,s=e.magFilter,c=void 0===s?i.t:s,f=e.wrapS,l=void 0===f?i.f:f,p=e.wrapT,h=void 0===p?i.f:p,d=e.format,m=void 0===d?i.w:d,v=e.type,g=void 0===v?i.C:v,y=e.flipY,b=void 0===y||y,x=e.premultiplyAlpha,w=void 0!==x&&x;Object(n.a)(this,t),this.image=o,this.minFilter=u,this.magFilter=c,this.wrapS=l,this.wrapT=h,this.format=m,this.type=g,this.flipY=b,this.premultiplyAlpha=w,this.generateMipmap=this.minFilter!==i.t&&this.minFilter!==i.u,this.needsUpdate=!1}},204:function(t,e,r){"use strict";var n=r(157),i=r(155),o=r(156),a=r(172);e.a=function(t,e,r){var u=t.gl,s=t.properties.get(e);return Object(i.a)(t.state,r),s.glTexture?(Object(o.a)(t.state,s.glTexture,r),!0===e.needsUpdate&&(Object(a.a)(t.state,e,s.glTexture),e.needsUpdate=!1)):(s.glTexture=u.createTexture(),Object(o.a)(t.state,s.glTexture,r),Object(n.a)(u,e),Object(a.a)(t.state,e,s.glTexture)),r}},205:function(t,e,r){"use strict";var n=r(141),i=r(129),o=r(143),a=r(140);e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,r=void 0===e?i.b:e,u=new o.a,s=new Float32Array([-1,-1,-1,3,3,-1]);return Object(a.a)(u,r,new n.a({array:s,itemSize:2})),u}},287:function(t,e,r){"use strict";var n=r(204);e.a=function(t,e){var r=t.textures,i=r.textureBindings,o=i.get(e);return o||(o=function(){return Object(n.a)(t,e,r.nextTextureUnit++)},i.set(e,o)),o}},374:function(t,e){t.exports=function(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}}}]);